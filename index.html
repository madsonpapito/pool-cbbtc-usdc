<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Pool Tracker | USDC/cbBTC</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Inter', sans-serif; }
        body { background-color: #0b0e11; color: #c9d1d9; margin: 0; }
        .card { background-color: #161b22; border: 1px solid #30363d; border-radius: 12px; }
        .text-accent { color: #2ea043; }
        .text-danger { color: #da3633; }
        .text-warning { color: #d29922; }
        .gradient-border { background: linear-gradient(135deg, #2ea043, #1f6feb); padding: 2px; border-radius: 14px; }
        .gradient-border-inner { background: #161b22; border-radius: 12px; }
        
        /* Layout */
        .app-layout { display: flex; min-height: 100vh; }
        
        /* Sidebar */
        .sidebar {
            width: 280px;
            min-width: 280px;
            background: #0d1117;
            border-right: 1px solid #21262d;
            padding: 20px 16px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto;
        }
        .sidebar-header {
            padding: 8px 12px;
            margin-bottom: 8px;
        }
        .sidebar-item {
            padding: 12px 14px;
            border-radius: 10px;
            cursor: pointer;
            border: 1px solid transparent;
            transition: all 0.2s ease;
        }
        .sidebar-item:hover {
            background: #161b22;
            border-color: #30363d;
        }
        .sidebar-active {
            background: #161b22 !important;
            border-color: #1f6feb !important;
            box-shadow: 0 0 0 1px rgba(31, 111, 235, 0.3);
        }
        .sidebar-divider {
            height: 1px;
            background: #21262d;
            margin: 12px 0;
        }
        .sidebar-portfolio {
            background: linear-gradient(135deg, rgba(31, 111, 235, 0.1), rgba(46, 160, 67, 0.1));
            border: 1px solid #30363d;
            border-radius: 10px;
            padding: 14px;
        }
        
        /* Main Content */
        .main-content {
            flex: 1;
            padding: 24px 32px;
            max-width: 1200px;
        }
        
        @media (max-width: 768px) {
            .app-layout { flex-direction: column; }
            .sidebar { width: 100%; min-width: 100%; height: auto; position: relative; flex-direction: row; overflow-x: auto; }
            .sidebar-item { min-width: 200px; }
            .main-content { padding: 16px; }
        }
    </style>
</head>
<body>
    <div class="app-layout">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h1 class="text-lg font-bold text-white">ðŸ“Š Pool Tracker</h1>
                <p class="text-xs text-gray-500 mt-1">2026-02-20 11:49</p>
            </div>
            
            <!-- Portfolio Summary -->
            <div class="sidebar-portfolio">
                <p class="text-xs text-gray-400 mb-1">Portfolio Total</p>
                <p class="text-xl font-bold text-white">$645.13</p>
                <div class="flex justify-between mt-2">
                    <div>
                        <p class="text-xs text-gray-500">PnL</p>
                        <p class="text-sm font-medium text-danger">$-58.85</p>
                    </div>
                    <div>
                        <p class="text-xs text-gray-500">Fees</p>
                        <p class="text-sm font-medium text-yellow-400">$4.96</p>
                    </div>
                </div>
            </div>
            
            <div class="sidebar-divider"></div>
            <p class="text-xs text-gray-500 px-2 mb-1">POSITIONS (2)</p>
            
            <!-- Pool Items -->
            
        <div class="sidebar-item sidebar-active" onclick="switchPool('4227642', this)" data-pool="4227642">
            <div class="flex justify-between items-center mb-1">
                <span class="text-sm font-medium text-white">ðŸ”´ #4227642</span>
                <span class="text-xs text-gray-500">Out</span>
            </div>
            <div class="text-xs text-gray-400 mb-2">USDC/cbBTC 0.05%</div>
            <div class="flex justify-between items-center">
                <span class="text-sm font-bold text-white">$253.59</span>
                <span class="text-xs text-danger">$-60.10</span>
            </div>
        </div>
        
        <div class="sidebar-item " onclick="switchPool('4660395', this)" data-pool="4660395">
            <div class="flex justify-between items-center mb-1">
                <span class="text-sm font-medium text-white">ðŸŸ¢ #4660395</span>
                <span class="text-xs text-gray-500">In Range</span>
            </div>
            <div class="text-xs text-gray-400 mb-2">USDC/cbBTC 0.05%</div>
            <div class="flex justify-between items-center">
                <span class="text-sm font-bold text-white">$391.54</span>
                <span class="text-xs text-accent">+$1.25</span>
            </div>
        </div>
        
            
            <div class="sidebar-divider"></div>
            
            <!-- Sync Button -->
            <button id="syncBtn" onclick="syncData()" class="w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2.5 rounded-lg text-sm font-medium transition flex items-center justify-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                </svg>
                Sync All Pools
            </button>
        </div>
        
        <!-- Main Content -->
        <div class="main-content">
            
    <div id="pool-4227642" class="pool-content" style="display: block;">
        <!-- Header -->
        <div class="flex justify-between items-center mb-6">
            <div>
                <h2 class="text-xl font-bold text-white">USDC/cbBTC <span class="text-sm text-gray-500">NFT #4227642</span></h2>
                <p class="text-sm text-gray-500">Base Network | Uniswap V3 | Fee: 0.05%</p>
            </div>
            <div class="flex items-center gap-3">
                <span class="text-red-400 text-sm font-medium">ðŸ”´ Out of Range</span>
            </div>
        </div>

        <!-- KPI Row 1 -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
            <div class="gradient-border"><div class="gradient-border-inner p-5">
                <p class="text-gray-500 text-xs mb-1">Pooled Assets</p>
                <p class="text-2xl font-bold text-white">$253.59</p>
                <p class="text-xs text-gray-500">88.5 Days Active</p>
            </div></div>
            <div class="card p-5">
                <p class="text-gray-500 text-xs mb-1">Total PnL</p>
                <p class="text-2xl font-bold text-danger">
                    $-60.10
                </p>
                <p class="text-xs text-danger">-18.86% ROI</p>
            </div>
            <div class="card p-5">
                <p class="text-gray-500 text-xs mb-1">Fee APR</p>
                <p class="text-2xl font-bold text-yellow-400">6.42%</p>
                <p class="text-xs text-gray-500">From fees only</p>
            </div>
            <div class="card p-5">
                <p class="text-gray-500 text-xs mb-1">Total APR</p>
                <p class="text-2xl font-bold text-danger">-77.79%</p>
                <p class="text-xs text-gray-500">Incl. value change</p>
            </div>
        </div>

        <!-- KPI Row 2 -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
            <div class="card p-5">
                <p class="text-gray-500 text-xs mb-1">Impermanent Loss</p>
                <p class="text-2xl font-bold text-danger">
                    -0.90%
                </p>
                <p class="text-xs text-gray-500">Price ratio: 0.76x</p>
            </div>
            <div class="card p-5">
                <p class="text-gray-500 text-xs mb-1">Total Fees Earned</p>
                <div class="flex items-baseline gap-2">
                    <p class="text-2xl font-bold text-yellow-400">$4.96</p>
                </div>
                <div class="text-xs text-gray-500 mt-1">
                    <span>collected: <span class="text-gray-300">$4.96</span></span> |
                    <span>pending: <span class="text-gray-300">$0.00</span></span>
                </div>
            </div>
            <div class="card p-5">
                <p class="text-gray-500 text-xs mb-1">LP vs HODL</p>
                <p class="text-2xl font-bold text-danger">
                    $-22.42
                </p>
                <p class="text-xs text-gray-500">HODL: $280.97</p>
            </div>
            <div class="card p-5">
                <p class="text-gray-500 text-xs mb-1">cbBTC Price</p>
                <p class="text-2xl font-bold text-white">$67,714</p>
                <p class="text-xs text-danger">
                    -23.6% since deposit
                </p>
            </div>
        </div>

        <!-- KPI Row 3 -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
            <div class="card p-5">
                <p class="text-gray-500 text-xs mb-1">Initial Investment</p>
                <p class="text-xl font-bold text-white">$318.65</p>
            </div>
            <div class="card p-5">
                <p class="text-gray-500 text-xs mb-1">Position Age</p>
                <p class="text-xl font-bold text-white">88.5 days</p>
            </div>
            <div class="card p-5">
                <p class="text-gray-500 text-xs mb-1">Deposit Date</p>
                <p class="text-xl font-bold text-white">2025-11-24</p>
            </div>
            <div class="card p-5">
                <p class="text-gray-500 text-xs mb-1">Initial cbBTC Price</p>
                <p class="text-xl font-bold text-white">$88,685</p>
            </div>
        </div>

        <!-- Token Balances & Range -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
            <div class="card p-5">
                <h3 class="text-sm text-gray-400 mb-4">Token Balances</h3>
                <div class="space-y-3">
                    <div class="flex justify-between items-center">
                        <span class="text-gray-300">USDC</span>
                        <span class="font-mono text-xl text-white">0.000000</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-300">cbBTC</span>
                        <span class="font-mono text-xl text-white">0.00374506</span>
                    </div>
                </div>
            </div>
            <div class="card p-5">
                <h3 class="text-sm text-gray-400 mb-4">Price Range (cbBTC/USDC)</h3>
                <div class="space-y-3">
                    <div class="flex justify-between">
                        <span class="text-gray-300">MIN</span>
                        <span class="font-mono text-cyan-400">$73,192</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-300">MAX</span>
                        <span class="font-mono text-cyan-400">$117,104</span>
                    </div>
                    <div class="flex justify-between pt-2 border-t border-gray-700">
                        <span class="text-gray-300">Current Price</span>
                        <span class="font-mono text-red-400">$67,714</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chart -->
        <div class="card p-6 mb-6">
            <h3 class="text-sm font-semibold text-gray-300 mb-4">Value History</h3>
            <canvas id="chart-4227642" height="100"></canvas>
        </div>

        <!-- Projections -->
        <div class="card p-6 mb-4">
            <h3 class="text-sm font-semibold text-gray-300 mb-4">ðŸ“Š Projected Yield</h3>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                <div title="Return: 0.0176%">
                    <p class="text-gray-500 text-xs">Daily</p>
                    <p class="text-white font-mono text-lg">$0.0561</p>
                </div>
                <div title="Return: 0.1231%">
                    <p class="text-gray-500 text-xs">Weekly</p>
                    <p class="text-white font-mono text-lg">$0.3924</p>
                </div>
                <div title="Return: 0.53%">
                    <p class="text-gray-500 text-xs">Monthly</p>
                    <p class="text-white font-mono text-lg">$1.68</p>
                </div>
                <div title="Return: 6.42%">
                    <p class="text-gray-500 text-xs">Yearly</p>
                    <p class="text-white font-mono text-lg">$20.46</p>
                </div>
            </div>
        </div>
    </div>
    
    <div id="pool-4660395" class="pool-content" style="display: none;">
        <!-- Header -->
        <div class="flex justify-between items-center mb-6">
            <div>
                <h2 class="text-xl font-bold text-white">USDC/cbBTC <span class="text-sm text-gray-500">NFT #4660395</span></h2>
                <p class="text-sm text-gray-500">Base Network | Uniswap V3 | Fee: 0.05%</p>
            </div>
            <div class="flex items-center gap-3">
                <span class="text-green-400 text-sm font-medium">ðŸŸ¢ In Range</span>
            </div>
        </div>

        <!-- KPI Row 1 -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
            <div class="gradient-border"><div class="gradient-border-inner p-5">
                <p class="text-gray-500 text-xs mb-1">Pooled Assets</p>
                <p class="text-2xl font-bold text-white">$391.54</p>
                <p class="text-xs text-gray-500">2.5 Days Active</p>
            </div></div>
            <div class="card p-5">
                <p class="text-gray-500 text-xs mb-1">Total PnL</p>
                <p class="text-2xl font-bold text-accent">
                    +$1.25
                </p>
                <p class="text-xs text-accent">+0.32% ROI</p>
            </div>
            <div class="card p-5">
                <p class="text-gray-500 text-xs mb-1">Fee APR</p>
                <p class="text-2xl font-bold text-yellow-400">0.00%</p>
                <p class="text-xs text-gray-500">From fees only</p>
            </div>
            <div class="card p-5">
                <p class="text-gray-500 text-xs mb-1">Total APR</p>
                <p class="text-2xl font-bold text-accent">46.75%</p>
                <p class="text-xs text-gray-500">Incl. value change</p>
            </div>
        </div>

        <!-- KPI Row 2 -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
            <div class="card p-5">
                <p class="text-gray-500 text-xs mb-1">Impermanent Loss</p>
                <p class="text-2xl font-bold text-warning">
                    -0.00%
                </p>
                <p class="text-xs text-gray-500">Price ratio: 1.01x</p>
            </div>
            <div class="card p-5">
                <p class="text-gray-500 text-xs mb-1">Total Fees Earned</p>
                <div class="flex items-baseline gap-2">
                    <p class="text-2xl font-bold text-yellow-400">$0.00</p>
                </div>
                <div class="text-xs text-gray-500 mt-1">
                    <span>collected: <span class="text-gray-300">$0.00</span></span> |
                    <span>pending: <span class="text-gray-300">$0.00</span></span>
                </div>
            </div>
            <div class="card p-5">
                <p class="text-gray-500 text-xs mb-1">LP vs HODL</p>
                <p class="text-2xl font-bold text-danger">
                    $-0.54
                </p>
                <p class="text-xs text-gray-500">HODL: $392.08</p>
            </div>
            <div class="card p-5">
                <p class="text-gray-500 text-xs mb-1">cbBTC Price</p>
                <p class="text-2xl font-bold text-white">$67,815</p>
                <p class="text-xs text-accent">
                    +0.9% since deposit
                </p>
            </div>
        </div>

        <!-- KPI Row 3 -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
            <div class="card p-5">
                <p class="text-gray-500 text-xs mb-1">Initial Investment</p>
                <p class="text-xl font-bold text-white">$390.29</p>
            </div>
            <div class="card p-5">
                <p class="text-gray-500 text-xs mb-1">Position Age</p>
                <p class="text-xl font-bold text-white">2.5 days</p>
            </div>
            <div class="card p-5">
                <p class="text-gray-500 text-xs mb-1">Deposit Date</p>
                <p class="text-xl font-bold text-white">2026-02-18</p>
            </div>
            <div class="card p-5">
                <p class="text-gray-500 text-xs mb-1">Initial cbBTC Price</p>
                <p class="text-xl font-bold text-white">$67,200</p>
            </div>
        </div>

        <!-- Token Balances & Range -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
            <div class="card p-5">
                <h3 class="text-sm text-gray-400 mb-4">Token Balances</h3>
                <div class="space-y-3">
                    <div class="flex justify-between items-center">
                        <span class="text-gray-300">USDC</span>
                        <span class="font-mono text-xl text-white">261.272694</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-300">cbBTC</span>
                        <span class="font-mono text-xl text-white">0.00192085</span>
                    </div>
                </div>
            </div>
            <div class="card p-5">
                <h3 class="text-sm text-gray-400 mb-4">Price Range (cbBTC/USDC)</h3>
                <div class="space-y-3">
                    <div class="flex justify-between">
                        <span class="text-gray-300">MIN</span>
                        <span class="font-mono text-cyan-400">$57,403</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-gray-300">MAX</span>
                        <span class="font-mono text-cyan-400">$73,559</span>
                    </div>
                    <div class="flex justify-between pt-2 border-t border-gray-700">
                        <span class="text-gray-300">Current Price</span>
                        <span class="font-mono text-green-400">$67,815</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chart -->
        <div class="card p-6 mb-6">
            <h3 class="text-sm font-semibold text-gray-300 mb-4">Value History</h3>
            <canvas id="chart-4660395" height="100"></canvas>
        </div>

        <!-- Projections -->
        <div class="card p-6 mb-4">
            <h3 class="text-sm font-semibold text-gray-300 mb-4">ðŸ“Š Projected Yield</h3>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                <div title="Return: 0.0000%">
                    <p class="text-gray-500 text-xs">Daily</p>
                    <p class="text-white font-mono text-lg">$0.0000</p>
                </div>
                <div title="Return: 0.0000%">
                    <p class="text-gray-500 text-xs">Weekly</p>
                    <p class="text-white font-mono text-lg">$0.0000</p>
                </div>
                <div title="Return: 0.00%">
                    <p class="text-gray-500 text-xs">Monthly</p>
                    <p class="text-white font-mono text-lg">$0.00</p>
                </div>
                <div title="Return: 0.00%">
                    <p class="text-gray-500 text-xs">Yearly</p>
                    <p class="text-white font-mono text-lg">$0.00</p>
                </div>
            </div>
        </div>
    </div>
    
        </div>
    </div>

    <script>
        const charts = {};
        
        function switchPool(nftId, element) {
            // Hide all pool content
            document.querySelectorAll('.pool-content').forEach(el => el.style.display = 'none');
            // Show selected pool
            document.getElementById('pool-' + nftId).style.display = 'block';
            
            // Update sidebar active state
            document.querySelectorAll('.sidebar-item').forEach(el => el.classList.remove('sidebar-active'));
            element.classList.add('sidebar-active');
            
            // Resize chart (needed after display change)
            if (charts[nftId]) {
                setTimeout(() => charts[nftId].resize(), 50);
            }
        }

        async function syncData() {
            const btn = document.getElementById('syncBtn');
            const isVercel = !window.location.hostname.includes('localhost') && !window.location.hostname.includes('127.0.0.1');
            
            if (isVercel) {
                alert('Sync sÃ³ funciona localmente.\nPara atualizar no Vercel:\n1. python tools/sync.py\n2. git push');
                return;
            }
            
            btn.innerHTML = 'Syncing...';
            btn.disabled = true;
            btn.classList.add('opacity-75');

            try {
                const response = await fetch('/api/sync', { method: 'POST' });
                const data = await response.json();
                if (data.success) {
                    alert('Sync complete!');
                    window.location.reload();
                } else {
                    alert('Error: ' + data.message);
                }
            } catch (error) {
                alert('Connection failed. Make sure server.py is running.');
            }
            btn.innerHTML = 'Sync All Pools';
            btn.disabled = false;
            btn.classList.remove('opacity-75');
        }

        // Initialize charts
        
        charts['4227642'] = new Chart(document.getElementById('chart-4227642'), {
            type: 'line',
            data: {
                labels: ["2026-01-23", "2026-01-23", "2026-01-23", "2026-01-23", "2026-01-25", "2026-01-25", "2026-01-25", "2026-01-25", "2026-01-25", "2026-01-26", "2026-01-26", "2026-01-26", "2026-01-26", "2026-01-26", "2026-01-26", "2026-01-26", "2026-01-26", "2026-01-26", "2026-01-26", "2026-01-27", "2026-01-29"],
                datasets: [{
                    label: 'Value USD',
                    data: [253.59225971298474, 69.1878640082986, 119.7431143720223, 119.89784821933989, 117.32191095346698, 117.20569028351044, 117.31571539303695, 117.39130885243989, 117.338303263548, 118.53346798019501, 118.41335807563121, 118.4182727037952, 118.33799546524656, 118.37011536954361, 118.47635507248232, 118.55057373710636, 118.57260648313786, 118.4886414759556, 118.38875544748166, 118.35841885827496, 307.14868791083984],
                    borderColor: '#2ea043',
                    backgroundColor: 'rgba(46, 160, 67, 0.1)',
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                plugins: { legend: { display: false } },
                scales: {
                    y: { grid: { color: '#21262d' } },
                    x: { grid: { display: false } }
                }
            }
        });
        
        charts['4660395'] = new Chart(document.getElementById('chart-4660395'), {
            type: 'line',
            data: {
                labels: ["2026-02-20"],
                datasets: [{
                    label: 'Value USD',
                    data: [391.53615130376966],
                    borderColor: '#2ea043',
                    backgroundColor: 'rgba(46, 160, 67, 0.1)',
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                plugins: { legend: { display: false } },
                scales: {
                    y: { grid: { color: '#21262d' } },
                    x: { grid: { display: false } }
                }
            }
        });
        
    </script>
</body>
</html>
    